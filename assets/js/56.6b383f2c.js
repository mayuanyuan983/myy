(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{468:function(a,t,s){"use strict";s.r(t);var e=s(62),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"sonar-代码扫描工具安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sonar-代码扫描工具安装"}},[a._v("#")]),a._v(" Sonar-代码扫描工具安装")]),a._v(" "),s("p",[a._v("版本：开源版 sonarqube-9.1.0.47736")]),a._v(" "),s("p",[a._v("所需环境：jdk11")]),a._v(" "),s("h2",{attrs:{id:"jdk11下载、解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk11下载、解压"}},[a._v("#")]),a._v(" jdk11下载、解压")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.oracle.com/java/technologies/downloads/#java11",target:"_blank",rel:"noopener noreferrer"}},[a._v("jdk下载地址"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("tar -zxvf jdk-11.0.16.1_linux-x64_bin.tar.gz")]),a._v(" "),s("h2",{attrs:{id:"sonar安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sonar安装"}},[a._v("#")]),a._v(" Sonar安装")]),a._v(" "),s("p",[a._v("因为sonar里面包含es,所以不能用root用户启动")]),a._v(" "),s("p",[a._v("1.创建用户\nuseradd sonar\npasswd sonar")]),a._v(" "),s("p",[a._v("2.上传解压包")]),a._v(" "),s("p",[a._v("unzip sonarqube-9.1.0.47736.zip")]),a._v(" "),s("p",[a._v("3.修改jdk环境")]),a._v(" "),s("p",[a._v("conf/wrapper.conf")]),a._v(" "),s("p",[a._v("wrapper.java.command=/home/sonar/jdk-11.0.16.1/bin/java")]),a._v(" "),s("p",[a._v("配置文件， 默认端口9000、9001")]),a._v(" "),s("p",[a._v("conf./sonar.properties")]),a._v(" "),s("p",[a._v("4.中文插件下载")]),a._v(" "),s("p",[a._v("下载jar文件至extensions下的plugins目录")]),a._v(" "),s("p",[a._v("https://github.com/xuhuisheng/sonar-l10n-zh/releases")]),a._v(" "),s("p",[a._v("5.启动")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd /home/sonar/sonarqube-9.1.0.47736/bin/linux-x86-64\n./sonar.sh start\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("浏览器访问地址：http://ip:9000"),s("br"),a._v("\n账号：admin\n密码：admin")]),a._v(" "),s("p",[a._v("默认数据库使用的嵌入式数据库h2")]),a._v(" "),s("p",[a._v("6.配置")]),a._v(" "),s("p",[a._v("配置->SCM->开")]),a._v(" "),s("p",[s("img",{attrs:{src:"attachment:102216ee7425d6f5c0db05e96ee3dc9f",alt:"截图"}})]),a._v(" "),s("p",[a._v("7.token:")]),a._v(" "),s("p",[a._v("记录下token后面要用")]),a._v(" "),s("p",[s("img",{attrs:{src:"attachment:06434e13921f0f214893df081bbb5800",alt:"截图"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"attachment:2296bfb59896f8ed2e531db8fc840a7f",alt:"截图"}})]),a._v(" "),s("h2",{attrs:{id:"jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[a._v("#")]),a._v(" jenkins")]),a._v(" "),s("h3",{attrs:{id:"tomcat-10-部署jenkins访问404问题处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-10-部署jenkins访问404问题处理"}},[a._v("#")]),a._v(" Tomcat 10 部署Jenkins访问404问题处理")]),a._v(" "),s("p",[a._v("如果你和我一样是tomcat10，那么会无法正常出现jenkins界面，一直404。")]),a._v(" "),s("p",[a._v("在JAVA 10版本中 javax.*包已重命名为jakarta.*包，查看容器的日志就可以发现详细的报错信息，程序如果运行没问题的话是不会生成这个日志文件的。")]),a._v(" "),s("p",[a._v("还有一点注意：Jenkins最新版推荐的JDK版本为11")]),a._v(" "),s("p",[a._v("在tomcat的context.xml配置中添加如下参数：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('<Loader jakartaConverter="TOMCAT" />\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"使用tomcat8-下的jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用tomcat8-下的jenkins"}},[a._v("#")]),a._v(" 使用tomcat8 下的Jenkins")]),a._v(" "),s("p",[a._v("1.系统配置")]),a._v(" "),s("p",[a._v("SonarQube servers")]),a._v(" "),s("p",[a._v("sonar 名称、地址、token")]),a._v(" "),s("p",[a._v("2.全局工具配置")]),a._v(" "),s("p",[a._v("jdk11")]),a._v(" "),s("p",[a._v("指定jdk安装目录即可")]),a._v(" "),s("p",[a._v("SonarQube Scanner")]),a._v(" "),s("p",[a._v("可以在线下载4.6.2.2472、也可指定目录")]),a._v(" "),s("p",[a._v("3.项目配置")]),a._v(" "),s("p",[a._v("新建任务、配置svn等")]),a._v(" "),s("p",[a._v("构建：")]),a._v(" "),s("p",[a._v("项目目录下需要有target文件夹，可以在svn上提交一个")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sonar.projectname=${JOB_NAME}\nsonar.projectKey=${JOB_NAME}\nsources=./\nsonar.java.binaries=./target\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[s("img",{attrs:{src:"attachment:72203d4ad9a8dab6e7baf27eee066684",alt:"截图"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);