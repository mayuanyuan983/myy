(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{661:function(t,a,s){"use strict";s.r(a);var e=s(62),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker部署单应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker部署单应用"}},[t._v("#")]),t._v(" Docker部署单应用")]),t._v(" "),s("h2",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),s("p",[t._v("1.在/home/demo目录中新建Dockerfile文件")]),t._v(" "),s("p",[t._v("2.新建data文件夹")]),t._v(" "),s("p",[t._v("3.在data文件夹放入jar包和config文件夹")]),t._v(" "),s("blockquote",[s("p",[t._v("home\n|--- demo\n|--- Dockerfile\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  dockerfile构建文件\n|--- data\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t挂载文件\n|--- demo-1.0.0.0.jar\t\t\t\t\t\t\t\t\t\t\t\t   应用包\n|--- config\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t 应用配置文件夹\n|--- application.yml\t\t\t\t\t\t\t\t\t\t\t\t 主配置文件\n|--- application-dev.yml \t\t\t\t\t\t\t\t\t\t 开发环境配置文件\n|--- application-prod.yml\t\t\t\t\t\t\t\t\t\t生产环境配置文件")])]),t._v(" "),s("h2",{attrs:{id:"dockerfile文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile文件"}},[t._v("#")]),t._v(" Dockerfile文件")]),t._v(" "),s("h5",{attrs:{id:"挂载jar包和配置文件夹-这样只需要重启容器即可"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载jar包和配置文件夹-这样只需要重启容器即可"}},[t._v("#")]),t._v(" 挂载jar包和配置文件夹，这样只需要重启容器即可")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('# 指含有jdk1.8的镜像\nFROM java:8\n# 开放内部端口 8888 \n# TODO 1\nEXPOSE 8888\n#修改docker的时间和宿主机时间一致 注意区分大小写 \nRUN echo "Asia/Shanghai" > /etc/timezone\n#指定命令执行路径\nWORKDIR /usr/data/demo\nENTRYPOINT ["java","-jar","demo-0.0.1-SNAPSHOT.jar"]\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"创建镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像"}},[t._v("#")]),t._v(" 创建镜像")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建镜像 镜像名称加冒号加版本号(自定义) 最后是空格加上一个点,不然会报错")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build -t test:1.0.0.0 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"启动镜像容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动镜像容器"}},[t._v("#")]),t._v(" 启动镜像容器")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("always -d -it --name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("demo -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8700")]),t._v(":8700 -v /home/demo/data:/usr/data/demo demo:1.0.0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"更新应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新应用"}},[t._v("#")]),t._v(" 更新应用")]),t._v(" "),s("p",[t._v("更新应用无需打包镜像，只需要修改宿主机的jar包及配置，重启容器ji'ke")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker restart demo\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);